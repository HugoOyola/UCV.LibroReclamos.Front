<p-dialog [(visible)]="visible" [modal]="true" [style]="{width: '36rem'}" [draggable]="false" [resizable]="false"
  header="Asignar responsable" (onHide)="close.emit()">
  <div class="space-y-4" (keydown.enter)="confirmIfValid()" (keydown.esc)="close.emit()">
    <div class="p-3 text-sm border rounded-lg bg-slate-50">
      Reclamación: <span class="font-semibold">#{{reclamacion?.codigo}}</span> — {{reclamacion?.usuario}}
    </div>

    <div class="space-y-2">
      <label class="text-sm font-medium">Responsable</label>
      <p-select [options]="responsables" optionLabel="nombre" optionValue="id" placeholder="Seleccione un responsable"
        [(ngModel)]="responsableId" [filter]="true" styleClass="w-full"></p-select>

      <div *ngIf="responsableSel() as r" class="p-3 bg-white border rounded-lg shadow-sm">
        <p class="font-semibold">{{r.nombre}}</p>
        <p class="text-sm text-slate-600">{{r.cargo}} • {{r.departamento}}</p>
        <p class="mt-1 text-xs">Casos activos: <span class="font-semibold">{{r.casosActivos ?? 0}}</span></p>
      </div>
    </div>

    <div>
      <p class="mb-1 text-sm font-medium">Comentario (opcional)</p>
      <textarea pInputTextarea [(ngModel)]="comentario" rows="4" class="w-full"></textarea>
    </div>

    <div class="flex justify-end gap-2">
      <button pButton type="button" label="Cancelar" class="p-button-text" (click)="close.emit()"></button>
      <button pButton type="button" label="Asignar" icon="pi pi-user-plus" [disabled]="!responsableId"
        (click)="confirmIfValid()"></button>
    </div>
  </div>
</p-dialog>