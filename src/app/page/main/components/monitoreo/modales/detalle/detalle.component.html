<p-dialog [(visible)]="visible" [showHeader]="showHeader" [dismissableMask]="true" [modal]="true" [draggable]="false"
  [resizable]="false" [maximizable]="maximizable" [breakpoints]="breakpoints" [style]="{ width: dialogWidth }"
  (onHide)="close.emit()" styleClass="ucv-dialog">
  <!-- Header personalizado: DEBE ser hijo directo de p-dialog -->
  <ng-template pTemplate="header">
    <div class="ucv-header">
      <div class="ucv-header__left">
        <i class="pi pi-file"></i>
        <span class="ucv-header__title">Detalle de la Reclamación</span>

        <span *ngIf="reclamacion?.codigo" class="ucv-badge" title="Código de reclamo">
          Código: {{ reclamacion?.codigo }}
        </span>
      </div>
    </div>
  </ng-template>

  <!-- CONTENIDO -->
  <ng-container *ngIf="reclamacion">
    <div class="pt-5 space-y-6">
      <!-- Datos del Reclamante -->
      <div class="p-4 bg-gray-100 border border-gray-300 border-solid rounded-lg">
        <h3 class="mb-4 text-lg font-semibold text-blue-600">Datos del Reclamante</h3>

        <div class="grid grid-cols-1 gap-4 mb-4 md:grid-cols-3">
          <div>
            <label class="block mb-1 text-sm font-medium text-gray-700">Cod. reclamo:</label>
            <span class="font-medium text-gray-900">{{reclamacion.codigo}}</span>
          </div>
          <div>
            <label class="block mb-1 text-sm font-medium text-gray-700">Nombre:</label>
            <span class="text-gray-900">{{reclamacion.usuario}}</span>
          </div>
          <div>
            <label class="block mb-1 text-sm font-medium text-gray-700">DNI:</label>
            <span class="text-gray-900">{{reclamacion.dni}}</span>
          </div>
        </div>

        <div class="grid grid-cols-1 gap-4 mb-4 md:grid-cols-2">
          <div>
            <label class="block mb-1 text-sm font-medium text-gray-700">Teléfono:</label>
            <span class="text-gray-900">{{reclamacion.telefono || '919507082'}}</span>
          </div>
          <div>
            <label class="block mb-1 text-sm font-medium text-gray-700">Correo:</label>
            <span class="text-gray-900">{{reclamacion.correo}}</span>
          </div>
        </div>

        <div class="grid grid-cols-1 gap-4 mb-4 md:grid-cols-2">
          <div>
            <label class="block mb-1 text-sm font-medium text-gray-700">Dirección:</label>
            <span class="text-gray-900">{{reclamacion.direccion || 'Carlos Baca Flor 427'}}</span>
          </div>
          <div>
            <label class="block mb-1 text-sm font-medium text-gray-700">Campus:</label>
            <span class="text-gray-900">{{reclamacion.campus}}</span>
          </div>
        </div>

        <div class="pt-4 mb-4 border-0 border-t border-gray-300 border-solid">
          <label class="block mb-2 text-sm font-medium text-gray-700">Padre o Apoderado:</label>
          <div class="italic text-gray-500">{{reclamacion.padreApoderado || 'No especificado'}}</div>
        </div>

        <div class="grid grid-cols-1 gap-4 md:grid-cols-2">
          <div>
            <label class="block mb-2 text-sm font-medium text-gray-700">Cambio de campus:</label>
            <p-select [options]="campusOptions" [ngModel]="reclamacion.campus" placeholder="Campus" class="w-full"
              >
            </p-select>
          </div>
          <div>
            <label class="block mb-2 text-sm font-medium text-gray-700">Email:</label>
            <input pInputText type="email" [value]="reclamacion.correo" class="w-full" readonly
              placeholder="Correo del reclamante">
          </div>
        </div>
      </div>

      <!-- Detalle del Reclamo -->
      <div class="p-4 border border-gray-300 border-solid rounded-lg bg-gray-50">
        <h3 class="mb-4 text-lg font-semibold text-blue-600">Detalle del Reclamo</h3>

        <div class="mb-4">
          <span class="text-sm text-gray-600">Fecha registro: {{reclamacion.fechaRegistro}}</span>
        </div>

        <div class="grid grid-cols-1 gap-4 mb-4 md:grid-cols-2">
          <div>
            <label class="block mb-2 text-sm font-medium text-gray-700">Clasificar reclamo:</label>
            <p-select [options]="clasificacionOptions" [ngModel]="reclamacion.categoria || 'SIN CLASIFICACIÓN'"
              placeholder="Clasificar reclamo :" class="w-full" >
            </p-select>
          </div>
          <div>
            <label class="block mb-2 text-sm font-medium text-gray-700">Asignar unidad:</label>
            <p-select [options]="unidadOptions" [ngModel]="reclamacion.responsable" placeholder="Asignar unidad :"
              class="w-full">
            </p-select>
          </div>
        </div>

        <div class="p-4 mb-4 border border-l-4 border-blue-500 border-solid rounded bg-blue-50">
          <div class="flex items-center mb-2">
            <i class="mr-2 text-blue-600 pi pi-box"></i>
            <span class="font-semibold text-blue-800">Bien: {{reclamacion.bien || 'SERVICIO'}}</span>
          </div>
          <div>
            <label class="block mb-1 text-sm font-medium text-gray-700">Descripción:</label>
            <p class="text-gray-600">{{reclamacion.descripcion || 'Convalidación de inglés'}}</p>
          </div>
        </div>

        <div class="p-4 mb-4 border border-l-4 border-orange-500 border-solid rounded-lg bg-orange-50">
          <div class="flex items-center mb-3">
            <i class="mr-2 text-orange-600 pi pi-exclamation-triangle"></i>
            <span class="font-semibold text-orange-800">Tipo: {{reclamacion.tipo || 'RECLAMO'}}</span>
          </div>

          <div class="mb-4">
            <label class="block mb-2 text-sm font-medium text-gray-700">Detalle del reclamo:</label>
            <div
              class="p-3 text-sm leading-relaxed text-gray-700 bg-white border border-gray-200 border-solid rounded-md">
              {{ reclamacion.detalleReclamo || 'Soy egresado de traducción ...' }}
            </div>
          </div>

          <div class="flex items-center">
            <i class="mr-2 text-orange-600 pi pi-dollar"></i>
            <span class="font-medium text-orange-800">Monto</span>
          </div>
        </div>

        <div class="p-3 mb-4 border border-l-4 border-purple-500 border-solid rounded bg-purple-50">
          <div class="flex items-center mb-2">
            <i class="mr-2 text-purple-600 pi pi-pen-to-square"></i>
            <span class="font-semibold text-purple-800">Pedido</span>
          </div>
          <div>
            <label class="block mb-1 text-sm font-medium text-gray-700">Descripción:</label>
            <p class="text-gray-600">{{reclamacion.descripcion || 'Convalidación de inglés'}}</p>
          </div>
        </div>
      </div>

      <!-- Botones -->
      <div class="flex justify-end gap-2 pt-4 border-0 border-t border-gray-200 border-solid">
        <p-button label="Cerrar" severity="secondary" [text]="true" (onClick)="close.emit()" />
      </div>
    </div>
  </ng-container>
</p-dialog>