<!-- Componente de Inicio/Dashboard -->
<div class="">
  <!-- Header del Dashboard -->
  <div class="bg-[#243659] shadow-lg p-6 md:p-6">
    <div class="flex flex-col items-start justify-between gap-6 md:flex-row md:items-center">
      <!-- Título y descripción -->
      <div class="flex items-center gap-2">
        <div class="items-center justify-center hidden sm:flex">
          <span class="text-4xl text-white material-symbols-outlined">check_box</span>
        </div>
        <div class="leading-none">
          <h1 class="text-xl font-bold text-white">
            MODULO DE LIBRO DE RECLAMACIONES
          </h1>
          <p class="mt-1 text-sm text-gray-400">
            Gestione y supervise todos los Libro de Reclamaciones desde un solo
            lugar.
          </p>
        </div>
      </div>

      <!-- Botones de acción -->
      <div class="flex flex-wrap justify-start w-full gap-3 md:w-auto md:justify-end">
        <div class="flex gap-4">
          <p-select [options]="periodos" [(ngModel)]="periodoSeleccionado" placeholder="30 días" class="w-32"
            size="small" (onChange)="onPeriodoChange($event)" />
          <p-button icon="pi pi-download" label="Exportar" severity="danger" size="small" (onClick)="onExportar()" />
        </div>
      </div>
    </div>
  </div>

  <div class="w-full p-6">
    <!-- Tarjetas de KPIs -->
    <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4">
      <!-- Total Reclamaciones -->
      <p-card class="border-l-4 shadow-md border-l-blue-500">
        <div class="flex items-start justify-between">
          <div>
            <p class="mb-1 text-sm text-gray-600">Total Reclamaciones</p>
            <h3 class="text-3xl font-bold text-gray-800">
              {{ data.totalReclamaciones }}
            </h3>
            <p class="mt-1 text-sm text-green-600">
              <i class="text-xs pi pi-arrow-up"></i>
              +{{ data.variacionMensual }}% vs mes anterior
            </p>
          </div>
          <i class="text-2xl text-blue-500 pi pi-file-edit"></i>
        </div>
      </p-card>

      <!-- Pendientes -->
      <p-card class="border-l-4 shadow-md border-l-red-500">
        <div class="flex items-start justify-between">
          <div>
            <p class="mb-1 text-sm text-gray-600">Pendientes</p>
            <h3 class="text-3xl font-bold text-gray-800">
              {{ data.pendientes }}
            </h3>
            <p class="mt-1 text-sm text-gray-500">
              {{ data.porcentajePendientes }}% del total
            </p>
          </div>
          <i class="text-2xl text-red-500 pi pi-clock"></i>
        </div>
      </p-card>

      <!-- Resueltas -->
      <p-card class="border-l-4 shadow-md border-l-green-500">
        <div class="flex items-start justify-between">
          <div>
            <p class="mb-1 text-sm text-gray-600">Resueltas</p>
            <h3 class="text-3xl font-bold text-gray-800">
              {{ data.resueltas }}
            </h3>
            <p class="mt-1 text-sm text-gray-500">
              {{ data.porcentajeResueltas }}% del total
            </p>
          </div>
          <i class="text-2xl text-green-500 pi pi-check-circle"></i>
        </div>
      </p-card>

      <!-- Tiempo Promedio -->
      <p-card class="border-l-4 shadow-md border-l-purple-500">
        <div class="flex items-start justify-between">
          <div>
            <p class="mb-1 text-sm text-gray-600">Tiempo Promedio</p>
            <h3 class="text-3xl font-bold text-gray-800">
              {{ data.tiempoPromedio }} días
            </h3>
            <p class="mt-1 text-sm text-gray-500">Tiempo de resolución</p>
          </div>
          <i class="text-2xl text-purple-500 pi pi-chart-line"></i>
        </div>
      </p-card>
    </div>

    <!-- Reclamos Recientes y Accesos Rápidos -->
    <div class="grid grid-cols-1 gap-4 mt-6 md:grid-cols-3">
      <!-- Accesos Rápidos -->
      <div class="flex flex-col p-6 bg-white rounded-lg shadow md:col-span-1">
        <div class="flex items-center justify-between mb-4">
          <h3 class="text-md font-semibold text-[#1e293b] flex items-center gap-2 uppercase">
            <i class="pi pi-bolt text-lg text-[#1e293b]"></i>
            Accesos Rápidos
          </h3>
        </div>

        <div class="flex flex-col gap-2">
          <button *ngFor="let acceso of accesosRapidos" (click)="onAccesoRapidoClick(acceso)"
            class="flex items-center gap-2 px-4 py-2 text-sm transition-colors duration-200 border border-solid border-gray-200 rounded hover:bg-[#e30512] hover:text-white focus:outline-none focus:ring-2 focus:ring-[#e30512] focus:ring-offset-1">
            <i [class]="acceso.icono"></i>
            <span>{{ acceso.label }}</span>
          </button>
        </div>
      </div>

      <!-- Reclamaciones Recientes -->
      <div class="flex flex-col p-6 bg-white rounded-lg shadow md:col-span-2">
        <div class="flex items-center justify-between mb-4">
          <h3 class="text-md font-semibold text-[#1e293b] flex items-center gap-2 uppercase">
            <i class="pi pi-file text-lg text-[#1e293b]"></i>
            Reclamaciones Recientes
          </h3>
          <button class="text-sm font-medium text-blue-600 hover:underline">Ver todas</button>
        </div>

        <div class="flex flex-col gap-3">
          <div *ngFor="let reclamo of reclamacionesRecientes"
            class="flex items-center justify-between px-4 py-3 border border-gray-200 border-solid rounded-lg">
            <div class="flex flex-wrap gap-2 items-center text-sm font-semibold text-[#1e293b]">
              <span>#{{ reclamo.codigo }}</span>
              <span class="text-sm px-2 py-0.5 rounded bg-gray-200 text-black font-medium">{{ reclamo.tipo }}</span>
              <span class="text-sm px-2 py-0.5 rounded" [ngClass]="estadoClass(reclamo.estado)">{{ reclamo.estado
                }}</span>
              <span class="text-sm px-2 py-0.5 rounded" [ngClass]="prioridadClass(reclamo.prioridad)">{{
                reclamo.prioridad }}</span>
            </div>
            <div class="text-right text-gray-500 text-[12px]">
              <div class="text-[#1e293b] font-semibold">{{ reclamo.campus }}</div>
              <div class="text-[#e30512] font-semibold">{{ reclamo.fecha }}</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Tipos y Campus -->
    <div class="grid w-full grid-cols-1 gap-4 mt-6 md:grid-cols-2">
      <!-- Distribución por Tipo -->
      <div class="bg-[#243659] text-white rounded-lg shadow-md h-full flex flex-col min-h-[200px]">
        <!-- Encabezado -->
        <div class="flex items-center justify-between px-6 py-4">
          <div class="flex items-center gap-2">
            <i class="text-white pi pi-chart-pie"></i>
            <h3 class="font-semibold uppercase text-md">
              Distribución por Tipo
            </h3>
          </div>
        </div>

        <!-- Lista sin franja azul -->
        <div
          class="flex-1 bg-white text-[#243659] overflow-y-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-transparent">
          <div *ngFor="let item of tiposData; let last = last"
            class="px-6 py-3 transition-colors duration-200 hover:bg-gray-200" [ngClass]="{ 'border-b-0': last }">
            <div class="flex items-center justify-between text-lg font-medium">
              <div class="flex items-center gap-3">
                <div class="w-3 h-3 rounded-full" [ngStyle]="{ 'background-color': item.color }"></div>
                <span>{{ item.tipo }}</span>
              </div>
              <div class="text-right">
                <div class="font-semibold text-md">
                  {{ item.cantidad }} solicitudes
                </div>
                <div class="text-sm text-[#e30512]">{{ item.porcentaje }}%</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Total -->
        <div class="px-6 py-2 bg-white text-[#243659] text-sm font-semibold border-t border-gray-200 rounded-b-lg">
          Total: {{ totalSolicitudesPorTipo }} solicitudes
        </div>
      </div>

      <!-- Reclamaciones por Campus -->
      <div class="bg-[#243659] text-white rounded-lg shadow-md h-full flex flex-col min-h-[200px]">
        <!-- Encabezado -->
        <div class="flex items-center justify-between px-6 py-4">
          <div class="flex items-center gap-2">
            <i class="text-white pi pi-building"></i>
            <h3 class="font-semibold uppercase text-md">
              Reclamaciones por Campus
            </h3>
          </div>
          <button class="flex items-center text-sm font-medium text-gray-400 hover:text-white">Ver todas
            <span class="ml-1 text-sm material-symbols-outlined">chevron_right</span>
          </button>
        </div>

        <!-- Lista con scroll sin franja azul -->
        <div
          class="bg-white text-[#243659] overflow-y-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-transparent"
          style="max-height: 190px">
          <div *ngFor="let campus of campusData; let last = last"
            class="px-6 py-3 transition-colors duration-200 border-0 border-b border-gray-200 border-solid hover:bg-gray-100"
            [ngClass]="{ 'border-b-0': last }">
            <div class="flex items-center justify-between mb-1 font-medium text-md">
              <span class="truncate">{{ campus.nombre }}</span>
              <span class="text-[12px] text-[#e30512]">{{ campus.cantidad }} ({{ campus.porcentaje }}%)</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-1.5">
              <div class="bg-blue-800 h-1.5 rounded-full transition-all duration-300"
                [style.width.%]="campus.porcentaje"></div>
            </div>
          </div>
        </div>

        <!-- Total -->
        <div class="px-6 py-2 bg-white text-[#243659] text-sm font-semibold border-t border-gray-200 rounded-b-lg">
          Total: {{ totalReclamacionesPorCampus }} reclamaciones
        </div>
      </div>
    </div>

    <div class="px-6 py-5 mt-6 bg-white shadow rounded-xl">
      <!-- Título -->
      <div class="flex items-center gap-2 mb-6">
        <i class="text-xl text-black pi pi-chart-line"></i>
        <h2 class="text-xl font-bold text-gray-900">Indicadores de Rendimiento</h2>
      </div>

      <!-- Indicadores -->
      <div class="grid grid-cols-1 gap-6 md:grid-cols-3">
        <!-- Indicador: Satisfacción -->
        <div class="text-center">
          <p class="text-3xl font-extrabold text-blue-600">{{ indicadores.satisfaccion }}%</p>
          <p class="mt-1 text-sm text-gray-600">Satisfacción del Cliente</p>
          <div class="w-full h-3 mt-3 overflow-hidden bg-gray-200 rounded-full">
            <div class="h-full transition-all duration-500 bg-blue-600 rounded-full"
              [style.width.%]="indicadores.satisfaccion"></div>
          </div>
        </div>

        <!-- Indicador: Resolución -->
        <div class="text-center">
          <p class="text-3xl font-extrabold text-green-600">{{ indicadores.resolucion }}%</p>
          <p class="mt-1 text-sm text-gray-600">Tasa de Resolución</p>
          <div class="w-full h-3 mt-3 overflow-hidden bg-gray-200 rounded-full">
            <div class="h-full transition-all duration-500 bg-green-600 rounded-full"
              [style.width.%]="indicadores.resolucion"></div>
          </div>
        </div>

        <!-- Indicador: Pendientes -->
        <div class="text-center">
          <p class="text-3xl font-extrabold text-purple-600">{{ indicadores.pendientes }}%</p>
          <p class="mt-1 text-sm text-gray-600">Reclamaciones Pendientes</p>
          <div class="w-full h-3 mt-3 overflow-hidden bg-gray-200 rounded-full">
            <div class="h-full transition-all duration-500 bg-purple-600 rounded-full"
              [style.width.%]="indicadores.pendientes"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>